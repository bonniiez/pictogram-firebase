(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{107:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=t(14),l=t.n(c),i=(t(96),t(19)),o=t(57),s=(t(100),t(101),o.a.initializeApp({apiKey:"AIzaSyADSh2WUPqZ-mYpJCPToSUZzuvIAmXHjFU",authDomain:"pictogram-d9648.firebaseapp.com",projectId:"pictogram-d9648",storageBucket:"pictogram-d9648.appspot.com",messagingSenderId:"413726148435",appId:"1:413726148435:web:478df06f785980a63f43a6"})),m=s.storage(),u=s.firestore(),d=s.auth(),p=o.a.firestore.FieldValue.serverTimestamp,g=t(58),f=function(e){var a=Object(n.useState)([]),t=Object(i.a)(a,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){var a=u.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(g.a)(Object(g.a)({},e.data()),{},{id:e.id}))})),c(a)}));return function(){return a()}}),[e]),{docs:r}},E=t(39),h=function(e){var a=e.setSelectedImg,t=e.setImgId,n=f("images").docs;return r.a.createElement("div",{className:"img-grid"},n.map((function(e){return r.a.createElement(E.a.div,{className:"img-wrap",key:e.id,layout:!0,whileHover:{opacity:1},whileTap:{scale:.9},onClick:function(){return function(e){a(e.url),t(e.id)}(e)}},r.a.createElement(E.a.img,{src:e.url,alt:"uploaded pic",initial:{opacity:1},animate:{opacity:1},transition:{delay:1}}))})))},b=t(141),v=t(145),j=t(144),O=function(e){var a=e.handleLogout;return r.a.createElement(b.a,{component:"main",maxWidth:"md"},r.a.createElement("div",{className:"title"},r.a.createElement(j.a,{container:!0,justify:"space-between",spacing:3,alignItems:"center"},r.a.createElement(j.a,{item:!0,xs:6},r.a.createElement("h1",null,"PictoGram")),r.a.createElement(j.a,{item:!0},r.a.createElement(v.a,{size:"small",variant:"outlined",color:"secondary",onClick:a},"Log Out"))),r.a.createElement("h2",null,"Image Repository"),r.a.createElement("p",null,"Upload your photos to build your own photo gallery!")))},S=t(7),y=t(56),w=t.n(y),I=t(72),k=function(e){var a=Object(n.useState)(0),t=Object(i.a)(a,2),r=t[0],c=t[1],l=Object(n.useState)(null),o=Object(i.a)(l,2),s=o[0],d=o[1],g=Object(n.useState)(null),f=Object(i.a)(g,2),E=f[0],h=f[1];return Object(n.useEffect)((function(){var a=m.ref(),t=u.collection("images"),n=a.child(e.name);n.put(e).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;c(a)}),(function(e){d(e)}),Object(I.a)(w.a.mark((function e(){var a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDownloadURL();case 2:a=e.sent,r=p(),t.add({url:a,createdAt:r}),h(a);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:r,url:E,error:s}},C=t(146),N=t(147),x=t(153);function A(e){return r.a.createElement(x.a,{display:"flex",alignItems:"center"},r.a.createElement(x.a,{width:"100%",mr:1},r.a.createElement(C.a,{variant:"determinate",value:e.value})),r.a.createElement(x.a,{minWidth:35},r.a.createElement(N.a,{variant:"body2",color:"textSecondary"},"".concat(Math.round(e.value),"%"))))}var W=function(e){var a=e.file,t=e.setFile,c=k(a),l=c.url,i=c.progress;return Object(n.useEffect)((function(){l&&t(null)}),[l,t]),r.a.createElement(A,{value:i})},P=t(73),z=t.n(P),T=Object(S.a)((function(e){return{hoverColor:{"&:hover":{backgroundColor:"rgba(240,190,190, 0.3)",borderRadius:"60%"}}}}))((function(e){var a=e.classes,t=Object(n.useState)(null),c=Object(i.a)(t,2),l=c[0],o=c[1],s=Object(n.useState)(null),m=Object(i.a)(s,2),u=m[0],d=m[1],p=["image/png","image/jpeg"];return r.a.createElement("form",null,r.a.createElement("label",{className:"upload-image-button"},r.a.createElement("input",{type:"file",onChange:function(e){var a=e.target.files[0];a&&p.includes(a.type)?(o(a),d("")):(o(null),d("Please select an image file (png/jpeg) "))}}),r.a.createElement(z.a,{className:a.hoverColor,style:{color:"#efb6b2"},fontSize:"large"})),r.a.createElement("div",{className:"output"},u&&r.a.createElement("div",{className:"error"},u),l&&r.a.createElement("div",null," ",l.name),l&&r.a.createElement(W,{file:l,setFile:o})))})),U=t(74),L=t.n(U),D=t(155),F=t(149),H=t(75),B=t.n(H),q=Object(S.a)((function(e){return{width:{width:"fit-content",float:"right",position:"fixed",bottom:e.spacing(3),right:e.spacing(3)},root:{background:"#ff9800",fontWeight:600}}}))((function(e){var a=e.selectedImg,t=e.setSelectedImg,c=e.imgId,l=e.classes,o=Object(n.useState)(!1),s=Object(i.a)(o,2),m=s[0],d=s[1],p=function(){d(!1)};return r.a.createElement(b.a,{maxWidth:"md"},r.a.createElement(E.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(E.a.img,{src:a,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}}),r.a.createElement(x.a,{mr:2},r.a.createElement(v.a,{className:l.width,size:"small",variant:"contained",color:"secondary",startIcon:r.a.createElement(L.a,null),onClick:function(){u.collection("images").doc(c).delete().then((function(e){console.log("Picture is deleted successfully!"),d(!0)})).catch((function(e){console.log("problem deleting img")}))}},"Delete"))),r.a.createElement(D.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},ContentProps:{classes:{root:l.root}},open:m,autoHideDuration:6e3,onClose:p,message:"Image deleted",action:r.a.createElement(F.a,{size:"small","aria-label":"close",color:"inherit",onClick:p},r.a.createElement(B.a,{fontSize:"small"}))}))})),J=t(156),R=t(150),M=t(151),Z=t(76),G=t.n(Z),K=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},customError:{color:"red",fontSize:"0.8rem",marginTop:10},progess:{position:"absolute"}}}))((function(e){var a=e.email,t=e.setEmail,n=e.password,c=e.setPassword,l=e.handleLogin,i=e.handleSignup,o=e.hasAccount,s=e.setHasAccount,m=e.emailError,u=e.passwordError,d=e.classes;return r.a.createElement(b.a,{component:"main",maxWidth:"xs"},r.a.createElement(R.a,null),r.a.createElement("div",{className:"loginContainer"},r.a.createElement("div",{className:d.paper},r.a.createElement(J.a,{className:d.avatar},r.a.createElement(G.a,null)),r.a.createElement("div",null,o?r.a.createElement(N.a,{component:"h1",variant:"h5"},"Log In"):r.a.createElement(N.a,{component:"h1",variant:"h5"},"Sign Up")),r.a.createElement(M.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"User Name",onChange:function(e){return t(e.target.value)},error:!!m,helperText:m}),r.a.createElement(M.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"password",label:"Password",type:"password",onChange:function(e){return c(e.target.value)},error:!!u,helperText:u}),r.a.createElement("div",null,o?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:d.submit,onClick:l,disabled:!a||!n},"Sign In"),r.a.createElement(j.a,{container:!0},r.a.createElement(j.a,{item:!0},r.a.createElement("p",null,"Don't have an account?"," ",r.a.createElement("span",{className:"loginSwitch",onClick:function(){return s(!o)}},"Sign up"))))):r.a.createElement("div",null,r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:d.submit,onClick:i,disabled:!a||!n},"Sign Up"),r.a.createElement(j.a,{container:!0},r.a.createElement(j.a,{item:!0},r.a.createElement("p",null,"Have an account?"," ",r.a.createElement("span",{className:"loginSwitch",onClick:function(){return s(!o)}},"Sign in")))))))))}));var V=function(){var e=Object(n.useState)(null),a=Object(i.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),s=o[0],m=o[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),g=p[0],f=p[1],E=Object(n.useState)(""),b=Object(i.a)(E,2),v=b[0],j=b[1],S=Object(n.useState)(""),y=Object(i.a)(S,2),w=y[0],I=y[1],k=Object(n.useState)(""),C=Object(i.a)(k,2),N=C[0],x=C[1],A=Object(n.useState)(""),W=Object(i.a)(A,2),P=W[0],z=W[1],U=Object(n.useState)(!1),L=Object(i.a)(U,2),D=L[0],F=L[1],H=function(){x(""),z("")},B=function(){d.onAuthStateChanged((function(e){e?(j(""),I(""),f(e)):f("")}))};return Object(n.useEffect)((function(){B()}),[]),r.a.createElement("div",{className:"App"},g?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{handleLogout:function(){d.signOut()}}),r.a.createElement(T,null),r.a.createElement(h,{setSelectedImg:c,setImgId:m}),t&&r.a.createElement(q,{selectedImg:t,setSelectedImg:c,imgId:s})):r.a.createElement(K,{email:v,setEmail:j,password:w,setPassword:I,handleLogin:function(){H(),d.signInWithEmailAndPassword(v,w).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/user-disabled":case"auth/user-not-found":x(e.message);break;case"auth/wrong-password":z(e.message)}}))},handleSignup:function(){H(),d.createUserWithEmailAndPassword(v,w).catch((function(e){switch(e.code){case"auth/email-already-in-use":case"auth/invalid-email":x(e.message);break;case"auth/weak-password":z(e.message)}}))},hasAccount:D,setHasAccount:F,emailError:N,passwordError:P}))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root"))},91:function(e,a,t){e.exports=t(107)},96:function(e,a,t){}},[[91,1,2]]]);
//# sourceMappingURL=main.f75f5c96.chunk.js.map