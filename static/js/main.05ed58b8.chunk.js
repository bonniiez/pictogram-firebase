(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{21:function(e,t,a){e.exports=a(33)},26:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(19),l=a.n(r),i=(a(26),a(7)),s=a(13),o=(a(30),a(31),s.a.initializeApp({apiKey:"AIzaSyADSh2WUPqZ-mYpJCPToSUZzuvIAmXHjFU",authDomain:"pictogram-d9648.firebaseapp.com",projectId:"pictogram-d9648",storageBucket:"pictogram-d9648.appspot.com",messagingSenderId:"413726148435",appId:"1:413726148435:web:478df06f785980a63f43a6"})),u=o.storage(),m=o.firestore(),d=o.auth(),p=s.a.firestore.FieldValue.serverTimestamp,g=a(14),f=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){var t=m.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(g.a)(Object(g.a)({},e.data()),{},{id:e.id}))})),r(t)}));return function(){return t()}}),[e]),{docs:c}},E=a(9),b=function(e){var t=e.setSelectedImg,a=f("images").docs;return c.a.createElement("div",{className:"img-grid"},a.map((function(e){return c.a.createElement(E.a.div,{className:"img-wrap",key:e.id,layout:!0,whileHover:{opacity:1},whileTap:{scale:.9},onClick:function(){return t(e.url)}},c.a.createElement(E.a.img,{src:e.url,alt:"uploaded pic",initial:{opacity:1},animate:{opacity:1},transition:{delay:1}}))})))},h=function(e){var t=e.handleLogout;return c.a.createElement("div",{className:"title"},c.a.createElement("nav",null,c.a.createElement("h1",null,"PictoGram"),c.a.createElement("button",{className:" logout-button",onClick:t},"Log Out")),c.a.createElement("h2",null,"Image Repository"),c.a.createElement("p",null,"Upload your photos to build your own photo gallery!"))},v=a(12),j=a.n(v),O=a(20),S=function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),o=s[0],d=s[1],g=Object(n.useState)(null),f=Object(i.a)(g,2),E=f[0],b=f[1];return Object(n.useEffect)((function(){var t=u.ref(),a=m.collection("images"),n=t.child(e.name);n.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;r(t)}),(function(e){d(e)}),Object(O.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDownloadURL();case 2:t=e.sent,c=p(),a.add({url:t,createdAt:c}),b(t);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:c,url:E,error:o}},w=function(e){var t=e.file,a=e.setFile,r=S(t),l=r.url,i=r.progress;return Object(n.useEffect)((function(){l&&a(null)}),[l,a]),c.a.createElement(E.a.div,{className:"progress-bar",initial:{width:0},animate:{width:i+"%"}})},y=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),o=s[0],u=s[1],m=["image/png","image/jpeg"];return c.a.createElement("form",null,c.a.createElement("label",{className:"upload-image-button"},c.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&m.includes(t.type)?(r(t),u("")):(r(null),u("Please select an image file (png/jpeg) "))}}),c.a.createElement("span",null,"+")),c.a.createElement("div",{className:"output"},o&&c.a.createElement("div",{className:"error"},o),a&&c.a.createElement("div",null," ",a.name),a&&c.a.createElement(w,{file:a,setFile:r})))},k=function(e){var t=e.selectedImg,a=e.setSelectedImg;return c.a.createElement(E.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)},initial:{opacity:0},animate:{opacity:1}},c.a.createElement(E.a.img,{src:t,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}}))},N=function(e){var t=e.email,a=e.setEmail,n=e.password,r=e.setPassword,l=e.handleLogin,i=e.handleSignup,s=e.hasAccount,o=e.setHasAccount,u=e.emailError,m=e.passwordError;return c.a.createElement("section",{className:"login"},c.a.createElement("div",{className:"loginContainer"},c.a.createElement("label",null,"Username"),c.a.createElement("input",{type:"text",auto:!0,required:!0,value:t,onChange:function(e){return a(e.target.value)}}),c.a.createElement("p",{className:"errorMsg"},u),c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",required:!0,value:n,onChange:function(e){return r(e.target.value)}}),c.a.createElement("p",{className:"errorMsg"},m),c.a.createElement("div",{className:"div btnContainer"},s?c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"login-button",onClick:l},"Sign In"),c.a.createElement("p",null,"Don't have an account? ",c.a.createElement("span",{onClick:function(){return o(!s)}},"Sign up"))):c.a.createElement("div",null,c.a.createElement("button",{className:"login-button",onClick:i},"Sign Up"),c.a.createElement("p",null,"Have an account? ",c.a.createElement("span",{onClick:function(){return o(!s)}},"Sign in"))))))};var I=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),o=s[0],u=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),g=p[0],f=p[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),j=v[0],O=v[1],S=Object(n.useState)(""),w=Object(i.a)(S,2),I=w[0],A=w[1],C=Object(n.useState)(""),P=Object(i.a)(C,2),U=P[0],L=P[1],F=Object(n.useState)(!1),H=Object(i.a)(F,2),x=H[0],B=H[1],D=function(){A(""),L("")},T=function(){d.onAuthStateChanged((function(e){e?(f(""),O(""),u(e)):u("")}))};return Object(n.useEffect)((function(){T()}),[]),c.a.createElement("div",{className:"App"},o?c.a.createElement(c.a.Fragment,null,c.a.createElement(h,{handleLogout:function(){d.signOut()}}),c.a.createElement(y,null),c.a.createElement(b,{setSelectedImg:r}),a&&c.a.createElement(k,{selectedImg:a,setSelectedImg:r})):c.a.createElement(N,{email:g,setEmail:f,password:j,setPassword:O,handleLogin:function(){D(),d.signInWithEmailAndPassword(g,j).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/user-disabled":case"auth/user-not-found":A(e.message);break;case"auth/wrong-password":L(e.message)}}))},handleSignup:function(){D(),d.createUserWithEmailAndPassword(g,j).catch((function(e){switch(console.log("signup error",e),e.code){case"auth/email-already-in-use":case"auth/invalid-email":A(e.message);break;case"auth/weak-password":L(e.message)}}))},hasAccount:x,setHasAccount:B,emailError:I,passwordError:U}))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(I,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.05ed58b8.chunk.js.map